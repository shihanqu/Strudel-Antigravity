# Music Theory for Agents

## I. FOUNDATIONS

### Harmonic Series
```
Frequency ratios define consonance:
Octave 2:1 | Fifth 3:2 | Fourth 4:3 | M3rd 5:4
Complex ratios = dissonance (tritone ≈45:32)
Timbre = harmonic content balance
```

### Tuning
```
Equal Temperament: 12√2 per semitone (12-TET standard)
Enables modulation, compromises purity
Just intonation: pure ratios, key-specific
```

### Chromatic Scale
```
12 semitones/octave: C C# D D# E F F# G G# A A# B
Enharmonic equivalents: C# = Db
```

### Circle of Fifths
```
Clockwise +sharps: C G D A E B F#
Counter -flats: C F Bb Eb Ab Db Gb
Order: F-C-G-D-A-E-B (both directions)
```

## II. INTERVALS

### Interval Structure (semitones)
```
 0=P1  1=m2  2=M2  3=m3  4=M3  5=P4
 6=TT  7=P5  8=m6  9=M6 10=m7 11=M7 12=P8

Quality: dim < m < P < M < aug
Perfect: 1,4,5,8 | Major/minor: 2,3,6,7

Inversions sum to 9:
M3→m6, P5→P4, M↔m, aug↔dim, P↔P
```

### Emotional Character
```
m2=tension | M2=neutral | m3=sad | M3=happy
P4=open | TT=unstable | P5=power | m6=anguish
M6=sweet | m7=bluesy | M7=dreamy | P8=unity
```

## III. SCALES

### Major Scale
```
Pattern: W-W-H-W-W-W-H
Degrees: 1(tonic) 2 3(quality) 4(subdominant) 
         5(dominant) 6 7(leading) 8
```

### Minor Scales
```
Natural:  W-H-W-W-H-W-W  (1 2 b3 4 5 b6 b7)
Harmonic: W-H-W-W-H-W+H-H (raises 7 for V7→i)
Melodic:  W-H-W-W-W-W-H  (jazz: same asc/desc)
```

### Modes (C parent)
```
Ionian(C):    W-W-H-W-W-W-H  = Major, bright
Dorian(D):    W-H-W-W-W-H-W  = Minor+♮6, jazzy
Phrygian(E):  H-W-W-W-H-W-W  = Minor+b2, dark/Spanish
Lydian(F):    W-W-W-H-W-W-H  = Major+#4, dreamy
Mixolydian(G):W-W-H-W-W-H-W  = Major+b7, bluesy/rock
Aeolian(A):   W-H-W-W-H-W-W  = Natural minor
Locrian(B):   H-W-W-H-W-W-W  = dim+b5, unstable

Recognition: Dorian ♮6 | Phrygian b2 | Lydian #4 | Mixo b7 | Locrian b5
```

### Pentatonic
```
Major: 1 2 3 5 6 (omits 4,7 = no half-steps)
Minor: 1 b3 4 5 b7
Blues: Minor pent + b5 (blue note)
Universal, safe for improv
```

### Exotic Scales
```
Whole-tone: all W steps, 6 notes, floating/Debussy
Diminished: H-W or W-H alternating, 8 notes
Chromatic: all 12 semitones
Harmonic Major: 1 2 3 4 5 b6 7 (major+b6)
Double Harmonic: 1 b2 3 4 5 b6 7 (b2+b6, Middle Eastern)
Altered: 7th mode melodic minor, for V7alt (b9,#9,#11,b13)
```

## IV. CHORDS

### Triads
```
Major: 1 3 5 (M3+m3)
Minor: 1 b3 5 (m3+M3)
Dim:   1 b3 b5 (m3+m3)
Aug:   1 3 #5 (M3+M3)
```

### Seventh Chords
```
Maj7:  1 3 5 7   (Δ7)
Dom7:  1 3 5 b7  (7)
Min7:  1 b3 5 b7 (-7)
ø7:    1 b3 b5 b7 (half-dim)
°7:    1 b3 b5 bb7 (dim7, stack m3s)
mM7:   1 b3 5 7  (minor w/maj7)
```

### Diatonic Harmony
```
Major:    I  ii iii IV V  vi vii°
7ths:   Δ7 m7 m7 Δ7 7 m7  ø7

Nat Min:  i ii° III iv v  VI VII
Harm Min: i ii° III+ iv V VI vii° (raised 7→leading tone)
```

### Extensions/Alterations
```
9th:  +octave+2nd  | 11th: +oct+4th | 13th: +oct+6th
add9: triad+9, no 7th | 6: triad+6 | 6/9: triad+6+9

Dominant alterations:
b9, #9 (Hendrix=7#9), #11 (lydian dom), b13 (dark)

Suspended: sus4 (replace 3→4), sus2 (replace 3→2)
Power: root+5th, no 3rd (ambiguous, distortion-friendly)
```

### Inversions
```
Root pos: 1-3-5 (bass=root)
1st inv:  3-5-1 (bass=3rd) symbol: /3
2nd inv:  5-1-3 (bass=5th) symbol: /5
3rd inv(7th): 7-1-3-5 (bass=7th)
```

## V. HARMONY

### Harmonic Function
```
Tonic(T):       I vi iii     = stability, home
Subdominant(S): IV ii        = departure
Dominant(D):    V vii°       = tension→tonic

Flow: T → S → D → T
```

### Progressions
```
Pop: I-V-vi-IV | I-IV-V-I | vi-IV-I-V
Jazz: ii-V-I (fundamental) | I-vi-ii-V (turnaround)
Blues 12-bar: I7(4) IV7(2) I7(2) V7 IV7 I7 V7

Secondary dominants: V/x = tonicize any chord
V/V = D7 in C (most common secondary)

Modal interchange: Borrow from parallel
bVII, iv, bVI, bIII from minor in major

Tritone sub: Replace V7 with bII7 (share tritone)
G7(B-F) → Db7(F-Cb) both→C
```

### Voice Leading
```
Minimize motion: hold common tones, step-wise
Guide tones (3rd+7th): smoothest voice leading
Avoid: parallel 5ths, parallel 8ves
Jazz: 3rd↔7th alternation in ii-V-I
```

### Cadences
```
Authentic: V→I (PAC if both root pos, soprano on tonic)
Half: →V (incomplete, comma)
Plagal: IV→I (amen)
Deceptive: V→vi (surprise)
```

### Modulation
```
Pivot chord: common to both keys
Direct: phrase boundary jump
Chromatic: accidentals guide
Common: I→V, I→vi, I→IV
```

## VI. MELODY

### Contour
```
Ascending: tension | Descending: release
Arch: complete thought | Inverted: dramatic
Wave: flowing continuity
```

### Motion
```
Conjunct: stepwise, smooth, lyrical
Disjunct: leaps, angular, dramatic
Balance both, large leaps→opposite step
```

### Motif Development
```
Repetition: exact repeat
Sequence: transpose
Inversion: flip intervals
Retrograde: reverse order
Augmentation: lengthen durations
Diminution: shorten durations
Fragmentation: use subset
Extension: add material
Ornamentation: embellish
```

### Non-Chord Tones
```
Passing: stepwise between chord tones
Neighbor: step away+back
Suspension: hold→resolve down
Appoggiatura: leap to, step away
Anticipation: arrive early
Pedal: sustained bass, harmony moves above
```

### Phrase Structure
```
Phrase: 4-8 bars, complete thought
Period: antecedent(HC) + consequent(AC)
Parallel: same start | Contrasting: different start
```

### Composition Guidelines
```
Rhythm first (identity before pitch)
1,3,5 = stable | 2,4,6 = passing | 7 = leading
Balance steps/leaps
Arch contour (save peak for climax)
Strong beats = chord tones
Target 3rds and 7ths for color
```

## VII. RHYTHM

### Meter
```
Simple: beats÷2
2/4(march) | 3/4(waltz) | 4/4(common)

Compound: beats÷3
6/8(jig) | 9/8 | 12/8(shuffle)

Odd: 5/4(3+2) | 7/8(2+2+3)
```

### Polyrhythm vs Polymeter
```
Polyrhythm: different subdivisions, same bar
3:2 = "pass the butter"

Polymeter: different bar lengths
4/4 over 3/4, realign at LCM
```

### Syncopation
```
Off-beat accent | Anticipation | Delayed attack
Reggae: 2+4 emphasis
Funk: accent ONE
```

### Swing
```
Unequal 8th subdivisions:
Straight: 1:1 | Light: 55/45
Medium: 3:2 | Heavy: 2:1 (triplet feel)
Dilla: humanized variance
```

### ADSR Envelope
```
Attack: 0→peak time
Decay: peak→sustain time
Sustain: hold level (%)
Release: end→0 time

Fast A+R = percussive | Slow A+R = pad
```

## VIII. GENRE THEORY

### Blues
```
12-bar: I7(4) IV7(2) I7(2) V7 IV7 I7 V7
Blue notes: b3, b5, b7 (bent, ambiguous)
Blues scale: 1 b3 4 b5 5 b7
Secret: minor pent over dom7 = clash
Shuffle: swung 8ths (12/8 feel)
```

### Jazz
```
ii-V-I: Dm7-G7-Cmaj7 (core progression)
Guide tones: smooth 3rd↔7th motion
Extensions: 9(sheen) 11(suspend) 13(warmth)
Alterations on V7: b9,#9,#11,b13
Coltrane changes: major 3rd cycle (Bmaj→G→Eb)
Modal: minimal changes, horizontal improv
```

### Rock/Metal
```
Power chords: 1+5, no 3rd (distortion-friendly)
Drop tuning: DADGBE for one-finger power
Pentatonic+blues scale riffs
Scales: Aeolian, harmonic min, Phrygian(b2!),
        Phrygian dom(exotic), Locrian(extreme)
Palm muting: percussive chug
Techniques: hammer/pull, bends, vibrato, slides
```

### Electronic
```
Waveforms:
Sine(pure,sub) | Square(hollow,8bit) | Saw(bright,leads)
Triangle(soft) | Noise(texture)

Subtractive: rich wave→filter→envelope
Filters: LPF(cut highs) HPF(cut lows) BPF(isolate)

LFO: slow modulation (vibrato, filter sweep)
Sidechain: kick→compress bass (pumping)
Layering: sub(low)+body(mid)+presence(high)

Structure: Intro→Build→Drop→Break→Build→Drop→Outro
Energy management via risers/drops/breakdowns
```

### Film Scoring
```
Leitmotif: recurring theme for character/concept
Transform: major↔minor, instrument swap, tempo

Techniques:
Mickey-mousing: sync to action (comedic)
Contrapuntal: contrast visuals (irony)
Hit points: accent visual events

Tension: tritones, m2, drones, tremolo, silence
Instruments→emotion:
Strings(human) | Brass(heroic) | Woodwinds(nature)
Piano(intimate) | Choir(epic) | Synth(scifi)
```

## IX. ADVANCED

### Negative Harmony
```
Reflect across Eb-E axis in C
G7→Fm6 (both resolve to C)
Darker parallel universe resolution
```

### Serialism
```
12-tone: use all 12 before repeating
Row transformations: Prime, Inversion, Retrograde, R-I
Atonal, non-hierarchical
```

### Spectral
```
Harmony from overtone analysis
Orchestrate partials of single note
Microtonal natural harmonics
Timbre = harmony
```

### Polytonality
```
Multiple keys simultaneously
Stravinsky: C+F# = max tension
Dreamlike, modernist
```

### Psychoacoustics
```
Shepard tone: infinite rise/fall via octave cycling
Missing fundamental: brain fills in bass
Combination tones: f1-f2 phantom

Distortion: even harmonics(warm) odd(aggressive)
Reverb: long(grand) short(intimate)
Compression: heavy(modern,loud) light(dynamic)
```

## X. ESSENTIAL FORMULAS

### Building chords from scales
```
Stack 3rds on each degree
Major I: 1-3-5-7 = Δ7
Major ii: 2-4-6-1 = m7
Pattern: Δ7 m7 m7 Δ7 7 m7 ø7
```

### Finding relative minor
```
Major key → down m3 (C→Am)
Share same key signature
```

### Transposition
```
Move all notes by same interval
Maintain intervallic relationships
Use Circle of Fifths for key shifts
```

### Tension/Release
```
Tension: dissonance, tritones, V7, extensions, upward motion
Release: consonance, I, root position, downward motion
Music = tension→release cycles
```

### Scale degree tendencies
```
7→8 (leading tone resolution)
4→3 (subdominant pull)
2→1 or 2→3 (supertonic motion)
6→5 (submediant descent)
Guide melody via inherent pulls
```

---

**Core Principle**: Music theory maps acoustic physics to emotional response via learned cultural patterns. Intervals→scales→chords→progressions = hierarchical tension/release architecture. Genre = specific vocabulary subset + production aesthetics.
